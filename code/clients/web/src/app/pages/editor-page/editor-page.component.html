<div class="toolbar mat-elevation-z2" fxLayout="row" fxLayoutAlign="space-between">
  <div *ngIf="workflow">
    <div [style.display]="editTitleMode ? 'none' : 'block'" class="title">
      {{ workflow?.title }}
      <button mat-icon-button class="edit-name" (click)="clickTitleEdit()">
        <mat-icon aria-label="Example icon-button with a heart icon">edit</mat-icon>
      </button>
    </div>
    <div [style.display]="editTitleMode ? 'block' : 'none'">
      <mat-form-field>
        <input #tileInput matInput [placeholder]="workflow?.title" (keyup.enter)="editTitle(tileInput.value)" autofocus>
      </mat-form-field>
    </div>
  </div>

  <div>
    <button mat-button (click)="undo()" [disabled]="!canUndo()" i18n="@@undo">Undo</button>
    <button mat-raised-button (click)="save()" color="primary" i18n="@@save">Save</button>
  </div>
</div>

<app-editor class="editor" [workflow]="workflow" [processes]="processes | async" (workflowChanged)="workflowChanged($event)"
  [running]="runs()"></app-editor>


<app-process-list @slide *ngIf="showProcessList" [processes]="processes | async" [wps]="wps | async" class="process-list"></app-process-list>

<ng-container *ngIf="workflow?.id >= 0">
  <button *ngIf="!runs(); else runningTemplate" mat-fab color="primary" class="run" [disabled]="workflowError !== ''" (click)="run()">
    <mat-icon [matTooltip]="workflowError" aria-label="Run">play_arrow</mat-icon>
  </button>

  <ng-template #runningTemplate>
    <mat-spinner class="run" diameter="56"></mat-spinner>
  </ng-template>
</ng-container>